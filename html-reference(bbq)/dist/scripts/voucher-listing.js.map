{"version":3,"sources":["voucher-listing.js"],"names":["filters","voucherListingUrl","pageSize","filterObject","totalElements","pageNumber","currentPageLength","filterMinPriceSlider","filterMaxPriceSlider","filterSelectedMinPrice","filterSelectedMaxPrice","getCurrencyCode","currency","enableFilterClearAllButton","$","show","disableFilterClearAllButton","hide","buildMultiOrSingleMatchQuery","ids","key","page","singleKey","multiKey","includes","index","indexOf","splice","length","value","Object","assign","push","Array","isArray","join","buildPriceQuery","minPrice","maxPrice","buildIdQuery","countries","cities","branches","buildAdditionFilterQuery","treatTypes","foodClassifications","dayOfWeeks","voucherTypes","getCountryFilterList","countryOptions","forEach","country","country_id","country_name","getCityHtml","city","city_id","city_name","getCityFilterList","cityList","getBranchFilterList","branchList","branch","branch_id","branch_name","getAdditionFilterList","additionFilters","type","additionFilterList","filter","getWeekDayList","weekDayList","dayOfWeek","buildVoucherCard","voucher","voucher_id","voucher_banner","voucher_name","currency_code","price","disableOrEnablePrice","priceElement","is","convertFilterObjectArrayValues","requestFilterObject","sort","size","emptyVoucherListing","empty","disableLoadMore","enableLoadMore","mergeFilters","newFilters","newMinPrice","newMaxPrice","countryIds","Set","map","has","a","b","localeCompare","cityIds","branchIds","buildFilter","filterData","updateStatus","VoucherFilter","slider","range","min","max","values","slide","event","ui","val","stop","getVoucherListingPage","html","buildVoucherListing","voucherData","voucherList","append","document","on","load","click","e","children","remove","preventDefault","ajax","dataType","url","data","headers","success","vouchers","total_elements","page_number","page_size","content","keys","change","countryOptionId","parseInt","target","id","focusout","voucher_types","food_classifications","treat_types","day_of_weeks","min_price","max_price"],"mappings":"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","file":"voucher-listing.js","sourcesContent":["//voucher listing\n\nlet filters;\nconst voucherListingUrl = 'https://bbq-crm-api.specbee.in/api/v1/search/vouchers?size=5';\nlet pageSize;\nlet filterObject = {};\nlet totalElements;\nlet pageNumber;\nlet currentPageLength;\nlet filterMinPriceSlider;\nlet filterMaxPriceSlider;\nlet filterSelectedMinPrice;\nlet filterSelectedMaxPrice;\n\nfunction getCurrencyCode(currency) {\n  if (currency === 'INR') {\n    return '&#8377;'\n  }\n  return '&#8377;'\n}\n\nfunction enableFilterClearAllButton() {\n  $('#clear-all-voucher-filters').show();\n}\n\nfunction disableFilterClearAllButton() {\n  $('#clear-all-voucher-filters').hide();\n}\n\nfunction buildMultiOrSingleMatchQuery(ids, key) {\n  filterObject.page = 0;\n  const singleKey = `${key}.equals`;\n  const multiKey = `${key}.in`;\n  if (ids) {\n    if (key === 'countryId' && ids === 3 && filterObject[singleKey]) {\n      delete filterObject[singleKey];\n    } else if (key === 'countryId') {\n      filterObject[singleKey] = ids;\n    } else if (filterObject[singleKey] === ids) {\n      delete filterObject[singleKey];\n    } else if (filterObject[multiKey] && filterObject[multiKey].includes(ids)) {\n      const index = filterObject[multiKey].indexOf(ids);\n      if (index > -1) {\n        filterObject[multiKey].splice(index, 1);\n      }\n      if (filterObject[multiKey].length === 1) {\n        const value = filterObject[multiKey][0];\n        delete filterObject[multiKey];\n        filterObject[singleKey] = value;\n      }\n    } else if (filterObject[singleKey]) {\n      delete Object.assign(filterObject, {\n        [multiKey]: filterObject[singleKey]\n      })[singleKey];\n      filterObject[multiKey] = [filterObject[multiKey]];\n      filterObject[multiKey].push(ids);\n    } else if (filterObject[multiKey]) {\n      filterObject[multiKey].push(ids);\n    } else if (!Array.isArray(ids)) {\n      filterObject[singleKey] = ids;\n    } else if (ids.length > 1) {\n      filterObject[multiKey].push(ids.join());\n    } else {\n      filterObject[singleKey] = ids.join();\n    }\n  }\n}\n\nfunction buildPriceQuery(minPrice, maxPrice) {\n  filterObject.page = 0;\n  if (minPrice) {\n    filterObject['price.greaterThanOrEqual'] = minPrice;\n  }\n  if (maxPrice) {\n    filterObject['price.lessThanOrEqual'] = maxPrice;\n  }\n}\n\nfunction buildIdQuery(countries, cities, branches) {\n  buildMultiOrSingleMatchQuery(countries, 'countryId');\n  buildMultiOrSingleMatchQuery(cities, 'cityId');\n  buildMultiOrSingleMatchQuery(branches, 'branchId');\n}\n\nfunction buildAdditionFilterQuery(treatTypes, foodClassifications, dayOfWeeks, voucherTypes) {\n  buildMultiOrSingleMatchQuery(treatTypes, 'treatType');\n  buildMultiOrSingleMatchQuery(foodClassifications, 'foodClassification');\n  buildMultiOrSingleMatchQuery(dayOfWeeks, 'weekDays');\n  buildMultiOrSingleMatchQuery(voucherTypes, 'voucherType');\n}\n\nfunction getCountryFilterList() {\n  let countryOptions = '';\n  countryOptions += '<option value=\"3\">Select a country</option>';\n  filters.countries.forEach((country) => {\n    if (filterObject['countryId.equals'] && filterObject['countryId.equals'] === country.country_id) {\n      countryOptions += `<option value=${country.country_id} selected>${country.country_name}</option>`;\n    } else {\n      countryOptions += `<option value=${country.country_id}>${country.country_name}</option>`;\n    }\n  });\n  return countryOptions;\n}\n\nfunction getCityHtml() {\n  `<div class=\"form-item__checkbox\">\n     <input id=\"city-${city.city_id}\" type=\"checkbox\" name=\"city\" value=\"${city.city_id}\" checked>\n     <label for=\"city-${city.city_id}\">${city.city_name}</label>\n  </div>`\n}\n\nfunction getCityFilterList() {\n  let cityList = '';\n  filters.cities.forEach((city) => {\n    if ((filterObject['cityId.in'] && filterObject['cityId.in'].includes(city.city_id)) || (filterObject['cityId.equals'] && filterObject['cityId.equals'] === city.city_id)) {\n      cityList += `<div class=\"form-item__checkbox\">\n                     <input id=\"city-${city.city_id}\" type=\"checkbox\" name=\"city\" value=\"${city.city_id}\" checked>\n                     <label for=\"city-${city.city_id}\">${city.city_name}</label>\n                  </div>`;\n    } else {\n      cityList += `<div class=\"form-item__checkbox\">\n                     <input id=\"city-${city.city_id}\" type=\"checkbox\" name=\"city\" value=\"${city.city_id}\">\n                     <label for=\"city-${city.city_id}\">${city.city_name}</label>\n                  </div>`;\n    }\n  });\n  return cityList;\n}\n\nfunction getBranchFilterList() {\n  let branchList = '';\n  filters.branches.forEach((branch) => {\n    if ((filterObject['branchId.in'] && filterObject['branchId.in'].includes(branch.branch_id)) || (filterObject['branchId.equals'] && filterObject['branchId.equals'] === branch.branch_id)) {\n      branchList += `<div class=\"form-item__checkbox\">\n                        <input id=\"branch-${branch.branch_id}\" type=\"checkbox\" name=\"branch\" value=\"${branch.branch_id}\" checked>\n                        <label for=\"branch-${branch.branch_id}\">${branch.branch_name}</label>\n                    </div>`;\n    } else {\n      branchList += `<div class=\"form-item__checkbox\">\n                        <input id=\"branch-${branch.branch_id}\" type=\"checkbox\" name=\"branch\" value=\"${branch.branch_id}\">\n                        <label for=\"branch-${branch.branch_id}\">${branch.branch_name}</label>\n                    </div>`;\n    }\n  });\n  return branchList;\n}\n\nfunction getAdditionFilterList(additionFilters, type) {\n  let additionFilterList = '';\n  additionFilters.forEach((filter) => {\n    if ((filterObject[`${type}.in`] && filterObject[`${type}.in`].includes(filter)) || (filterObject[`${type}.equals`] && filterObject[`${type}.equals`] === filter)) {\n      additionFilterList += `<div class=\"form-item__checkbox\">\n                                <input id=\"${type}-${filter}\" type=\"checkbox\" name=${type} value=\"${filter}\" checked>\n                                <label for=\"${type}-${filter}\">${filter}</label>\n                             </div>`;\n    } else {\n      additionFilterList += `<div class=\"form-item__checkbox\">\n                                <input id=\"${type}-${filter}\" type=\"checkbox\" name=${type} value=\"${filter}\">\n                                <label for=\"${type}-${filter}\">${filter}</label>\n                             </div>`;\n    }\n  });\n  return additionFilterList;\n}\n\nfunction getWeekDayList() {\n  let weekDayList = '';\n  filters.dayOfWeeks.forEach((dayOfWeek) => {\n    if ((filterObject['weekDays.in'] && filterObject['weekDays.in'].includes(dayOfWeek)) || (filterObject['weekDays.equals'] && filterObject['weekDays.equals'] === dayOfWeek)) {\n      weekDayList += `<div class=\"form-item__checkbox\">\n                        <input id=\"${dayOfWeek}\" type=\"checkbox\" name=\"dayOfWeek\" value=\"${dayOfWeek}\" checked>\n                        <label for=\"${dayOfWeek}\">${dayOfWeek}</label>\n                      </div>`\n    } else {\n      weekDayList += `<div class=\"form-item__checkbox\">\n                        <input id=\"${dayOfWeek}\" type=\"checkbox\" name=\"dayOfWeek\" value=\"${dayOfWeek}\">\n                        <label for=\"${dayOfWeek}\">${dayOfWeek}</label>\n                      </div>`\n    }\n  });\n  return weekDayList;\n}\n\nfunction buildVoucherCard(voucher) {\n  return `<article id=\"${voucher.voucher_id}\" class=\"card card--voucher\">\n            <div class=\"card__media\">\n                <img src=\"${voucher.voucher_banner}\" alt=\"Voucher\">\n            </div>\n            <div class=\"card__header\">\n                <div class=\"unit\">${voucher.voucher_name}</div>\n                <div class=\"price\">${getCurrencyCode(voucher.currency_code)}${voucher.price}</div>\n            </div>\n            <div class=\"card__footer\">\n              <div class=\"atc\">\n                <a href=\"#\" class=\"button button--atc\">Add to Cart</a>\n                <div class=\"card__footer__form-wrap\">\n                  <form class=\"form form--atc\">\n                      <div class=\"value-button\" class=\"decrease\" onclick=\"decreaseValue()\" value=\"Decrease Value\">-</div>\n                      <input type=\"text\" class=\"number\" value=\"0\" readonly/>\n                      <div class=\"value-button\" class=\"increase\" onclick=\"increaseValue()\" value=\"Increase Value\">+</div>\n                  </form>\n                </div>\n              </div>\n              <div class=\"info\">\n                <a href=\"#\" class=\"open-dialog\">More info</a>\n              </div>\n            </div>\n           </article>`;\n}\n\nfunction disableOrEnablePrice() {\n  if (filterMinPriceSlider === filterMaxPriceSlider) {\n    $('#price-filter').hide();\n  } else {\n    const priceElement = $('#price-filter');\n    if (priceElement.is(':hidden')) {\n      priceElement.show();\n    }\n  }\n}\n\nfunction convertFilterObjectArrayValues() {\n  const requestFilterObject = {};\n  if (filterObject['price.greaterThanOrEqual']) {\n    requestFilterObject['price.greaterThanOrEqual'] = filterObject['price.greaterThanOrEqual'];\n  }\n  if (filterObject['price.lessThanOrEqual']) {\n    requestFilterObject['price.lessThanOrEqual'] = filterObject['price.lessThanOrEqual'];\n  }\n  if (filterObject.sort) {\n    requestFilterObject.sort = filterObject.sort;\n  }\n  if (filterObject.size) {\n    requestFilterObject.size = filterObject.size;\n  }\n  if (filterObject.page) {\n    requestFilterObject.page = filterObject.page;\n  }\n  if (filterObject['countryId.in']) {\n    requestFilterObject['countryId.in'] = filterObject['countryId.in'].join();\n  }\n  if (filterObject['countryId.equals']) {\n    requestFilterObject['countryId.equals'] = filterObject['countryId.equals'];\n  }\n  if (filterObject['cityId.in']) {\n    requestFilterObject['cityId.in'] = filterObject['cityId.in'].join();\n  }\n  if (filterObject['cityId.equals']) {\n    requestFilterObject['cityId.equals'] = filterObject['cityId.equals'];\n  }\n  if (filterObject['branchId.in']) {\n    requestFilterObject['branchId.in'] = filterObject['branchId.in'].join();\n  }\n  if (filterObject['branchId.equals']) {\n    requestFilterObject['branchId.equals'] = filterObject['branchId.equals'];\n  }\n  if (filterObject['treatType.in']) {\n    requestFilterObject['treatType.in'] = filterObject['treatType.in'].join();\n  }\n  if (filterObject['treatType.equals']) {\n    requestFilterObject['treatType.equals'] = filterObject['treatType.equals'];\n  }\n  if (filterObject['foodClassification.in']) {\n    requestFilterObject['foodClassification.in'] = filterObject['foodClassification.in'].join();\n  }\n  if (filterObject['foodClassification.equals']) {\n    requestFilterObject['foodClassification.equals'] = filterObject['foodClassification.equals'];\n  }\n  if (filterObject['weekDays.in']) {\n    requestFilterObject['weekDays.in'] = filterObject['weekDays.in'].join();\n  }\n  if (filterObject['weekDays.equals']) {\n    requestFilterObject['weekDays.equals'] = filterObject['weekDays.equals'];\n  }\n  if (filterObject['voucherType.in']) {\n    requestFilterObject['voucherType.in'] = filterObject['voucherType.in'].join();\n  }\n  if (filterObject['voucherType.equals']) {\n    requestFilterObject['voucherType.equals'] = filterObject['voucherType.equals'];\n  }\n  return requestFilterObject;\n}\n\nfunction emptyVoucherListing() {\n  $('#voucher-list').empty();\n}\n\nfunction disableLoadMore() {\n  $('#filter-load-more').hide();\n}\n\nfunction enableLoadMore() {\n  $('#filter-load-more').show();\n}\n\nfunction mergeFilters(newFilters) {\n  const newMinPrice = newFilters.minPrice;\n  const newMaxPrice = newFilters.maxPrice;\n  if (newMinPrice < filters.minPrice) {\n    filters.minPrice = newMinPrice;\n  }\n  if (newMaxPrice > filters.maxPrice) {\n    filters.maxPrice = newMaxPrice;\n  }\n  if (filters.countries && newFilters.countries) {\n    const countryIds = new Set(filters.countries.map((country) => country.country_id));\n    filters.countries = [...filters.countries,\n      ...newFilters.countries.filter((country) => !countryIds.has(country.country_id))\n    ];\n    filters.countries.sort((a, b) => a.country_name.localeCompare(b.country_name));\n  }\n  if (filters.cities && newFilters.cities) {\n    const cityIds = new Set(filters.cities.map((city) => city.city_id));\n    filters.cities = [...filters.cities,\n      ...newFilters.cities.filter((city) => !cityIds.has(city.city_id))\n    ];\n    filters.cities.sort((a, b) => a.city_name.localeCompare(b.city_name));\n  }\n  if (filters.branches && newFilters.branches) {\n    const branchIds = new Set(filters.branches.map((branch) => branch.branch_id));\n    filters.branches = [...filters.branches,\n      ...newFilters.branches.filter((branch) => !branchIds.has(branch.branch_id))\n    ];\n    filters.branches.sort((a, b) => a.branch_name.localeCompare(b.branch_name));\n  }\n  if (filters.voucherTypes && newFilters.voucherTypes) {\n    filters.voucherTypes = [...new Set([...filters.voucherTypes, ...newFilters.voucherTypes])];\n    filters.voucherTypes.sort();\n  }\n  if (filters.foodClassifications && newFilters.foodClassifications) {\n    filters.foodClassifications = [...new Set([...filters.foodClassifications,\n      ...newFilters.foodClassifications\n    ])];\n    filters.foodClassifications.sort();\n  }\n  if (filters.treatTypes && newFilters.treatTypes) {\n    filters.treatTypes = [...new Set([...filters.treatTypes, ...newFilters.treatTypes])];\n    filters.treatTypes.sort();\n  }\n  if (filters.dayOfWeeks && newFilters.dayOfWeeks) {\n    filters.dayOfWeeks = [...new Set([...filters.dayOfWeeks, ...newFilters.dayOfWeeks])];\n  }\n}\n\nfunction buildFilter(filterData, updateStatus) {\n  if (updateStatus) {\n    mergeFilters(filterData);\n  } else {\n    filters = new VoucherFilter(filterData);\n  }\n  if (!filterMinPriceSlider) {\n    filterMinPriceSlider = filters.minPrice;\n  }\n  if (!filterMaxPriceSlider) {\n    filterMaxPriceSlider = filters.maxPrice;\n  }\n  if (!filterSelectedMinPrice) {\n    filterSelectedMinPrice = filters.minPrice;\n  }\n  if (!filterSelectedMaxPrice) {\n    filterSelectedMaxPrice = filters.maxPrice;\n  }\n  const minPrice = $('#amount-min');\n  const maxPrice = $('#amount-max');\n  $('#price-range').slider({\n    range: true,\n    min: filterMinPriceSlider,\n    max: filterMaxPriceSlider,\n    values: [filterSelectedMinPrice, filterSelectedMaxPrice],\n    slide(event, ui) {\n      minPrice.val(ui.values[0]);\n      maxPrice.val(ui.values[1]);\n    },\n    stop(event, ui) {\n      filterSelectedMinPrice = ui.values[0];\n      filterSelectedMaxPrice = ui.values[1];\n      buildPriceQuery(filterSelectedMinPrice, filterSelectedMaxPrice);\n      getVoucherListingPage();\n    },\n  });\n  minPrice.val(filterSelectedMinPrice);\n  maxPrice.val(filterSelectedMaxPrice);\n  disableOrEnablePrice();\n  $('#country-filter-dropdown').html(getCountryFilterList());\n  $('#city-filter-select').html(getCityFilterList());\n  $('#branch-filter-select').html(getBranchFilterList());\n  $('#treat-type-select').html(getAdditionFilterList(filters.treatTypes, 'treatType'));\n  $('#food-classification-select').html(getAdditionFilterList(filters.foodClassifications, 'foodClassification'));\n  $('#day-of-the-week-select').html(getWeekDayList());\n  $('#voucher-type-select').html(getAdditionFilterList(filters.voucherTypes, 'voucherType'));\n}\n\nfunction buildVoucherListing(voucherData, updateStatus) {\n  const voucherList = $('#voucher-list');\n  if (!updateStatus) {\n    voucherList.empty();\n  }\n  voucherData.forEach((voucher) => {\n    voucherList.append(buildVoucherCard(voucher));\n  });\n}\n\n$(document).on('click', '.open-dialog', () => {\n  $('#dialog').load('voucher_info.html', function () {\n    $('#dialog .close').click(function (e) {\n      $('#dialog').children().remove();\n      e.preventDefault();\n    });\n  });\n});\n\nfunction getVoucherListingPage(updateStatus = false) {\n  $.ajax({\n    dataType: 'json',\n    url: voucherListingUrl,\n    data: convertFilterObjectArrayValues(),\n    headers: {\n      'BBQ-Search-Key': 'fca2cd09af45d7872342a882f035a6e3',\n    },\n    success(vouchers) {\n      totalElements = vouchers.total_elements;\n      pageNumber = vouchers.page_number;\n      pageSize = vouchers.page_size;\n      currentPageLength = vouchers.content.length;\n      if (pageSize * (pageNumber + 1) < totalElements) {\n        enableLoadMore();\n      } else {\n        disableLoadMore();\n      }\n      if (currentPageLength !== 0) {\n        if (filterObject && Object.keys(filterObject).length !== 0) {\n          enableFilterClearAllButton();\n        }\n        buildFilter(vouchers.filters, updateStatus);\n        buildVoucherListing(vouchers.content, updateStatus);\n      } else {\n        emptyVoucherListing();\n        $('#price-filter').hide();\n        $('#country-filter-dropdown').empty();\n        $('#city-filter-select').empty();\n        $('#branch-filter-select').empty();\n        $('#treat-type-select').empty();\n        $('#food-classification-select').empty();\n        $('#day-of-the-week-select').empty();\n        $('#voucher-type-select').empty();\n      }\n    },\n  });\n}\n\n$(() => {\n  buildIdQuery(1);\n  getVoucherListingPage();\n});\n\n$('#clear-all-voucher-filters').click(() => {\n  filterObject = {};\n  getVoucherListingPage();\n  filterSelectedMinPrice = null;\n  filterSelectedMaxPrice = null;\n  disableFilterClearAllButton();\n});\n\n$('#country-filter-dropdown').change(() => {\n  const countryOptionId = parseInt($('#country-filter-dropdown option:selected').val(), 10);\n  buildIdQuery(countryOptionId);\n  getVoucherListingPage();\n});\n\n$('#city-filter-select').change((e) => {\n  buildIdQuery(null, parseInt($(`#${e.target.id}`).val(), 10));\n  getVoucherListingPage();\n});\n\n$('#branch-filter-select').change((e) => {\n  buildIdQuery(null, null, parseInt($(`#${e.target.id}`).val(), 10));\n  getVoucherListingPage();\n});\n\n$('#treat-type-select').change((e) => {\n  buildAdditionFilterQuery($(`#${e.target.id}`).val());\n  getVoucherListingPage();\n});\n\n$('#food-classification-select').change((e) => {\n  buildAdditionFilterQuery(null, $(`#${e.target.id}`).val());\n  getVoucherListingPage();\n});\n\n$('#day-of-the-week-select').change((e) => {\n  buildAdditionFilterQuery(null, null, $(`#${e.target.id}`).val());\n  getVoucherListingPage();\n});\n\n$('#voucher-type-select').change((e) => {\n  buildAdditionFilterQuery(null, null, null, $(`#${e.target.id}`).val());\n  getVoucherListingPage();\n});\n\n$('#amount-min').focusout((e) => {\n  const value = parseInt(e.target.value, 10);\n  if (value !== filterSelectedMinPrice) {\n    filterSelectedMinPrice = value;\n    buildPriceQuery(filterSelectedMinPrice, filterSelectedMaxPrice);\n    getVoucherListingPage();\n  }\n});\n\n$('#amount-max').focusout((e) => {\n  const value = parseInt(e.target.value, 10);\n  if (value !== filterSelectedMaxPrice) {\n    filterSelectedMaxPrice = value;\n    buildPriceQuery(filterSelectedMinPrice, filterSelectedMaxPrice);\n    getVoucherListingPage();\n  }\n});\n\n$('#voucher-filter-sort-dropdown').change(() => {\n  const sort = parseInt($('#voucher-filter-sort-dropdown option:selected').val(), 10);\n  if (sort === 0) {\n    if (filterObject.page) {\n      filterObject.page = null;\n    }\n    filterObject.sort = 'price';\n    getVoucherListingPage();\n  } else if (sort === 1) {\n    if (filterObject.page) {\n      filterObject.page = null;\n    }\n    filterObject.sort = 'price,desc';\n    getVoucherListingPage();\n  }\n});\n\n$('#filter-load-more-button').click(() => {\n  filterObject.page = pageNumber + 1;\n  getVoucherListingPage(true);\n});\n\nclass VoucherFilter {\n  constructor(filter) {\n    this.countries = filter.countries;\n    this.cities = filter.cities;\n    this.branches = filter.branches;\n    this.voucherTypes = filter.voucher_types;\n    this.foodClassifications = filter.food_classifications;\n    this.treatTypes = filter.treat_types;\n    this.dayOfWeeks = filter.day_of_weeks;\n    this.minPrice = filter.min_price;\n    this.maxPrice = filter.max_price;\n  }\n}\n"]}